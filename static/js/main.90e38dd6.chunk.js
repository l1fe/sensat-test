(this.webpackJsonpsensat=this.webpackJsonpsensat||[]).push([[0],{60:function(e,t,n){"use strict";n.r(t);var r,a,o,c,s,i,d,g,l,u,b=n(0),j=n.n(b),p=n(23),O=n.n(p),h=n(6),f=n(24),m=n.n(f),x=n(25),v=function(e){return e.split("\n").filter((function(e){return e.length})).map((function(e){try{return JSON.parse(e)}catch(t){return{}}}))},y=n(2),w=n(7),S=n(32),H=n(4),k=n(5),A=k.b.div(r||(r=Object(H.a)(["\n  display: inline-block;\n  border-spacing: 0;\n  border: 1px solid black;\n"]))),B=k.b.div(a||(a=Object(H.a)(["\n  border-bottom: 1px solid black;\n  background-color: papayawhip;\n"]))),R=k.b.div(o||(o=Object(H.a)([""]))),F=k.b.div(c||(c=Object(H.a)(["\n  margin: 0;\n  padding: 0.5rem;\n  border-bottom: 1px solid black;\n  border-right: 1px solid black;\n  font-weight: 600;\n\n  ","\n"])),(function(e){return e.canSort&&"\n  background-color: yellow;\n\n  &:hover {\n    opacity: 0.5;\n  }\n  "})),G=k.b.div(s||(s=Object(H.a)(["\n  margin: 0;\n  padding: 0.5rem;\n  border-bottom: 1px solid black;\n  border-right: 1px solid black;\n"]))),P=k.b.div(i||(i=Object(H.a)(["\n  &:last-child {\n    ."," {\n      border-bottom: 0;\n    }\n  }\n\n  ","\n"])),G.selector,(function(e){return e.empty&&"\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 36px;\n  "})),T=n(30),C=n(12),D=n.n(C),E=D()((function(e){var t=e.split("~"),n=Object(h.a)(t,2),r=n[0],a=n[1];if(!r)return-1;if(!a)return 1;var o=new Date("".concat(r,"Z")),c=new Date("".concat(a,"Z")),s=o.getTime(),i=c.getTime();return s===i?0:s>i?1:-1})),M=function(e,t,n){var r=[e.values[n],t.values[n]];return E(function(e,t){return"".concat(e,"~").concat(t)}(r[0],r[1]))},_=D()((function(e){var t,n=new Set,r=Object(T.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.add(a)}}catch(o){r.e(o)}finally{r.f()}return Array.from(n)})),I=function(e){var t=e.value;return t.length>1?JSON.stringify(t):t[0]},L=n(31),z=n.n(L),J=k.b.div(d||(d=Object(H.a)(["\n  width: 100%;\n  padding: 0 4px;\n  box-sizing: border-box;\n"]))),N=k.b.input(g||(g=Object(H.a)(["\n  width: 100%;\n  box-sizing: border-box;\n"]))),U=n(1),Z=function(e){var t=e.column,n=t.filterValue,r=t.preFilteredRows,a=t.setFilter,o=Object(b.useState)(n),c=Object(h.a)(o,2),s=c[0],i=c[1],d=r.length,g=z()((function(e){a(e||void 0)}),200);return Object(U.jsx)(J,{children:Object(U.jsx)(N,{value:s||"",onChange:function(e){i(e.target.value),g(e.target.value)},placeholder:"Search ".concat(d," records...")})})},V=function(e){var t=e.sensorReadings,n=e.loading,r=e.error,a=Object(b.useMemo)((function(){return[{Header:"ID",accessor:"id",aggregate:"count",Aggregated:function(e){var t=e.value;return"".concat(t," IDs")}},{Header:"Box ID",accessor:"box_id",aggregate:_,Aggregated:I},{accessor:"sensor_type",Header:"Type of the sensor",disableGroupBy:!1,disableSortBy:!1,disableFilters:!1,aggregate:_,Aggregated:I},{Header:"Type of data",accessor:"name",disableFilters:!1,aggregate:_,Aggregated:I},{Header:"Range",columns:[{Header:"Lower bound",accessor:"range_l",aggregate:_,Aggregated:I},{Header:"Upper bound",accessor:"range_u",aggregate:_,Aggregated:I}]},{Header:"Geolocation",columns:[{Header:"Latitude",accessor:"latitude",aggregate:_,Aggregated:I},{Header:"Longitude",accessor:"longitude",aggregate:_,Aggregated:I}]},{Header:"Measurement unit",accessor:"unit",aggregate:_,Aggregated:I},{Header:function(e){var t=e.columns;return t.length>0&&t.filter((function(e){return e.isGrouped})).length>0?"Median reading value":"Reading value"},accessor:"reading",aggregate:"median"},{Header:"Timestamp",accessor:"reading_ts",sortType:M,disableSortBy:!1,Cell:function(e){if(!e.value)return null;var t=new Date("".concat(e.value,"Z")).toUTCString();return Object(U.jsx)("span",{children:t})},Aggregated:function(){return""}}]}),[]),o=Object(b.useMemo)((function(){return{Filter:Z,disableFilters:!0,disableSortBy:!0,disableGroupBy:!0,width:150}}),[]),c=Object(w.useTable)({columns:a,data:t,defaultColumn:o},w.useFilters,w.useGroupBy,w.useSortBy,w.useExpanded,w.useBlockLayout),s=c.getTableProps,i=c.getTableBodyProps,d=c.headerGroups,g=c.rows,l=c.totalColumnsWidth,u=c.prepareRow,p=j.a.useCallback((function(e){var t=e.index,n=e.style,r=g[t];return u(r),Object(U.jsx)(P,Object(y.a)(Object(y.a)({},r.getRowProps({style:n})),{},{children:r.cells.map((function(e){return Object(U.jsxs)(G,Object(y.a)(Object(y.a)({},e.getCellProps()),{},{children:[" ",e.isGrouped?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("span",Object(y.a)(Object(y.a)({},r.getToggleRowExpandedProps()),{},{children:r.isExpanded?"\ud83d\udc47":"\ud83d\udc49"}))," ",e.render("Cell")," (",r.subRows.length,")"]}):e.isAggregated?e.render("Aggregated"):e.isPlaceholder?null:e.render("Cell")]}))}))}))}),[u,g]);return Object(U.jsxs)(A,Object(y.a)(Object(y.a)({},s()),{},{children:[Object(U.jsxs)(B,{children:[d.map((function(e){return Object(U.jsx)(P,Object(y.a)(Object(y.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(U.jsxs)(F,Object(y.a)(Object(y.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{canSort:e.canSort,children:[e.render("Header"),Object(U.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))})),d.length>0&&Object(b.createElement)(P,Object(y.a)(Object(y.a)({},d[1].getHeaderGroupProps()),{},{key:"Filtering"}),d[1].headers.map((function(e){return Object(U.jsx)(F,Object(y.a)(Object(y.a)({},e.getHeaderProps()),{},{children:e.canFilter?e.render("Filter"):null}))}))),d.length>0&&Object(b.createElement)(P,Object(y.a)(Object(y.a)({},d[1].getHeaderGroupProps()),{},{key:"Aggregation"}),d[1].headers.map((function(e){return Object(U.jsx)(F,Object(y.a)(Object(y.a)({},e.getHeaderProps()),{},{children:e.canGroupBy?Object(U.jsx)("span",Object(y.a)(Object(y.a)({},e.getGroupByToggleProps()),{},{children:e.isGrouped?"Exit aggregation\ud83d\uded1 ":"Aggregate\ud83d\udc4a"})):null}))})))]}),Object(U.jsx)(R,Object(y.a)(Object(y.a)({},i()),{},{children:g.length>0?Object(U.jsx)(S.a,{height:600,itemCount:g.length,itemSize:66,width:l,children:p}):Object(U.jsxs)(P,{empty:!0,children:[n?"Loading":"No data was found",r&&"[Got an error: ".concat(r,"]")]})}))]}))},W=function(){var e=Object(b.useState)({loading:!1,error:"",sensorReadings:[]}),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(x.a)(v),o=Object(h.a)(a,1)[0];return Object(b.useEffect)((function(){r({loading:!0,error:"",sensorReadings:[]}),m.a.get("https://bitbucket.org/sensatmapp/angular-take-home-test-1/raw/c071f2057457da27d051617ce2c9fbf18f1f263e/data/sensor_readings.json").then((function(e){var t=e.data;return o(t)})).then((function(e){r({loading:!1,error:"",sensorReadings:e})})).catch((function(e){r({loading:!1,error:e.message||"Error",sensorReadings:[]})}))}),[o]),Object(U.jsxs)("div",{children:[Object(U.jsx)("h1",{children:"Dashboard"}),Object(U.jsx)(V,{sensorReadings:n.sensorReadings,loading:n.loading,error:n.error})]})},q=Object(k.a)(l||(l=Object(H.a)(["\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n"]))),K=k.b.div(u||(u=Object(H.a)(["\n  text-align: center;\n"])));var Q=function(){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(q,{}),Object(U.jsx)(K,{children:Object(U.jsx)(W,{})})]})};O.a.render(Object(U.jsx)(j.a.StrictMode,{children:Object(U.jsx)(Q,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.90e38dd6.chunk.js.map