{"version":3,"sources":["components/Dashboard/parseInput.ts","components/Dashboard/Table/styles.ts","components/Dashboard/Table/index.tsx","components/Dashboard/index.tsx","config.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["parseInput","str","split","filter","length","map","json","JSON","parse","reading_ts","Date","err","TContainer","styled","div","THeader","TBody","Th","Td","Tr","selector","Table","sensorReadings","columns","useMemo","Header","accessor","disableSortBy","sortType","Cell","props","formatted","value","toUTCString","defaultColumn","React","width","useTable","data","useSortBy","useBlockLayout","getTableProps","getTableBodyProps","headerGroups","rows","totalColumnsWidth","prepareRow","RenderRow","useCallback","index","style","row","getRowProps","cells","cell","getCellProps","render","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","getSortByToggleProps","isSorted","isSortedDesc","height","itemCount","itemSize","Dashboard","useState","sensorsReadings","setSensorsReadings","useWorker","parseWorker","useEffect","axios","get","then","res","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6ee2b55b.chunk.js","sourcesContent":["import { SensorReading } from '../../types';\n\nconst parseInput = (str: string): Array<SensorReading | {}> => {\n  const parsed: Array<SensorReading | {}> = str\n    .split('\\n')\n    .filter((str) => str.length)\n    .map((str) => {\n      try {\n        const json: SensorReading = JSON.parse(str);\n        // Append Z in order to parse the date as UTC\n        json.reading_ts = new Date(`${json.reading_ts}Z`);\n        return json;\n      } catch (err) {\n        return {};\n      }\n    });\n\n  return parsed;\n};\n\nexport default parseInput;\n","import styled from 'styled-components';\n\nexport const TContainer = styled.div`\n  display: inline-block;\n  border-spacing: 0;\n  border: 1px solid black;\n`;\n\nexport const THeader = styled.div`\n  border-bottom: 1px solid black;\n  background-color: papayawhip;\n`;\n\nexport const TBody = styled.div``;\n\nexport const Th = styled.div`\n  margin: 0;\n  padding: 0.5rem;\n  border-bottom: 1px solid black;\n  border-right: 1px solid black;\n  font-weight: 600;\n`;\n\nexport const Td = styled.div`\n  margin: 0;\n  padding: 0.5rem;\n  border-bottom: 1px solid black;\n  border-right: 1px solid black;\n`;\n\nexport const Tr = styled.div`\n  &:last-child {\n    .${Td.selector} {\n      border-bottom: 0;\n    }\n  }\n`;\n","import React, { useMemo } from 'react';\nimport { useTable, useBlockLayout, useSortBy, Column } from 'react-table';\nimport { FixedSizeList } from 'react-window';\n\nimport { SensorReading } from '../../../types';\nimport { TContainer, THeader, TBody, Tr, Td, Th } from './styles';\n\nexport interface TableProps {\n  sensorReadings: Array<object>;\n}\n\nexport const TABLE_HEIGHT_PX = 600;\nexport const ROW_HEIGHT_PX = 66;\n\nexport const Table: React.FC<TableProps> = ({ sensorReadings }) => {\n  const columns = useMemo(\n    () =>\n      [\n        {\n          Header: 'ID',\n          accessor: 'id',\n          disableSortBy: true,\n        },\n        {\n          Header: 'Box ID',\n          accessor: 'box_id',\n          disableSortBy: true,\n        },\n        {\n          Header: 'Type of the sensor',\n          accessor: 'sensor_type',\n        },\n        {\n          Header: 'Type of data',\n          accessor: 'name',\n          disableSortBy: true,\n        },\n        {\n          Header: 'Range',\n          columns: [\n            {\n              Header: 'Lower bound',\n              accessor: 'range_l',\n              disableSortBy: true,\n            },\n            {\n              Header: 'Upper bound',\n              accessor: 'range_u',\n              disableSortBy: true,\n            },\n          ],\n        },\n        {\n          Header: 'Geolocation',\n          columns: [\n            {\n              Header: 'Latitude',\n              accessor: 'latitude',\n              disableSortBy: true,\n            },\n            {\n              Header: 'Longitude',\n              accessor: 'longitude',\n              disableSortBy: true,\n            },\n          ],\n        },\n        {\n          Header: 'Measurement unit',\n          accessor: 'unit',\n          disableSortBy: true,\n        },\n        {\n          Header: 'Timestamp',\n          accessor: 'reading_ts',\n          sortType: 'datetime',\n          Cell: (props) => {\n            const formatted = props.value.toUTCString();\n            return <span>{formatted}</span>;\n          },\n        },\n      ] as Column<SensorReading | {}>[],\n    []\n  );\n\n  const defaultColumn = React.useMemo(\n    () => ({\n      width: 150,\n    }),\n    []\n  );\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    totalColumnsWidth,\n    prepareRow,\n  } = useTable(\n    {\n      columns,\n      data: sensorReadings,\n      defaultColumn,\n    },\n    useSortBy,\n    useBlockLayout\n  );\n\n  const RenderRow = React.useCallback(\n    ({ index, style }) => {\n      const row = rows[index];\n      prepareRow(row);\n      return (\n        <Tr\n          {...row.getRowProps({\n            style,\n          })}\n        >\n          {row.cells.map((cell) => {\n            return <Td {...cell.getCellProps()}>{cell.render('Cell')}</Td>;\n          })}\n        </Tr>\n      );\n    },\n    [prepareRow, rows]\n  );\n\n  return (\n    <TContainer {...getTableProps()}>\n      <THeader>\n        {headerGroups.map((headerGroup) => (\n          <Tr {...headerGroup.getHeaderGroupProps()}>\n            {headerGroup.headers.map((column) => (\n              <Th {...column.getHeaderProps(column.getSortByToggleProps())}>\n                {column.render('Header')}\n                <span>\n                  {column.isSorted ? (column.isSortedDesc ? ' ðŸ”½' : ' ðŸ”¼') : ''}\n                </span>\n              </Th>\n            ))}\n          </Tr>\n        ))}\n      </THeader>\n\n      <TBody {...getTableBodyProps()}>\n        <FixedSizeList\n          height={TABLE_HEIGHT_PX}\n          itemCount={rows.length}\n          itemSize={ROW_HEIGHT_PX}\n          width={totalColumnsWidth}\n        >\n          {RenderRow}\n        </FixedSizeList>\n      </TBody>\n    </TContainer>\n  );\n};\n\nexport default Table;\n","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useWorker } from '@koale/useworker';\n\nimport { DATA_URL } from '../../config';\nimport parseInput from './parseInput';\nimport Table from './Table';\n\nconst Dashboard: React.FC = () => {\n  const [sensorsReadings, setSensorsReadings] = useState<Array<object>>([]);\n  const [parseWorker] = useWorker(parseInput);\n\n  useEffect(() => {\n    axios.get<string>(DATA_URL).then(({ data }) => {\n      // Offload the parsing of incoming data to the web worker\n      parseWorker(data).then((res) => {\n        setSensorsReadings(res);\n      });\n    });\n  }, [parseWorker]);\n\n  return (\n    <div>\n      <h1>Dashboard</h1>\n\n      <Table sensorReadings={sensorsReadings} />\n    </div>\n  );\n};\n\nexport default Dashboard;\n","export const DATA_URL =\n  'https://bitbucket.org/sensatmapp/angular-take-home-test-1/raw/c071f2057457da27d051617ce2c9fbf18f1f263e/data/sensor_readings.json';\n","import './App.css';\nimport Dashboard from './components/Dashboard';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Dashboard />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}